{"version":3,"sources":["modules/getDatasets.js","components/charts/line/BasicLineChart.js","components/LocationSelector.js","App.js","index.js"],"names":["parseCsvData","data","csvParser","csvParse","csvArr","on","record","read","push","err","console","error","message","write","csvToNestedDataset","dataset","headerRow","forEach","row","i","countryRegion","provinceState","countryRegionData","latitude","longitude","dateData","provinceStateDateData","cellValue","j","date","Date","cases","parseInt","getDatasets","callback","noCacheAxios","axios","create","headers","all","get","then","spread","confirmedResponse","deathsResponse","recoveredResponse","confirmedDataset","deathsDataset","recoveredDataset","countryRegionsToProvinceStatesMap","Object","entries","entry","keys","catch","log","BasicLineChart","chartData","chartTitle","datesToChartData","key","val","label","dataPoint","dateString","moment","toISOString","format","name","_","sortBy","values","style","fontSize","marginBottom","height","margin","top","right","left","bottom","strokeDasharray","dataKey","map","value","type","stroke","color","LocationSelector","selectedProvinceState","selectedCountryRegion","countryRegionsToProvinceStates","onCountryRegionChange","onProvinceStateChange","countryRegionOptions","sort","proviceStateOptions","Select","id","labelText","onChange","SelectItem","text","length","defaultProps","App","dataTableNames","useState","setCountryRegion","setProvinceState","setCountryRegionsToProvinceStates","sqlTablesLoaded","setSqlTablesLoaded","useEffect","datasetToTableData","tableData","countryRegionDataEntry","provinceStateData","provinceStateDataEntry","dateDataItem","tableName","alasql","tables","confirmed","deaths","recovered","query","args","confirmedQueryResult","deathsQueryResult","recoveredQueryResult","queryDateCounts","Confirmed","Deaths","Recovered","className","e","target","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.24efa441.chunk.js","sourcesContent":["import axios from 'axios';\nimport csvParse from 'csv-parse';\n\nconst PROVINCE_STATE_COLUMN = 0;\nconst COUNTRY_REGION_COLUMN = 1;\nconst LATITUDE_COLUMN = 2;\nconst LONGITUDE_COLUMN = 3;\nconst FIRST_DATE_COLUMN = 4;\n\n/**\n * Parses CSV data and returns a 2D array\n * @param {string} data - CSV data in string form.\n * @returns {string[][]} A 2D array version of the input CSV data.\n * @returns {string[][]} A 2D array version of the input CSV data.\n */\nconst parseCsvData = (data) => {\n  const csvParser = csvParse();\n  const csvArr = [];\n\n  // Use the readable stream api\n  csvParser.on('readable', function(){\n    let record;\n    while ((record = csvParser.read())) {\n      csvArr.push(record)\n    }\n  });\n  // Catch any error\n  csvParser.on('error', function(err){\n    console.error(err.message)\n  });\n  // Send data to read to the stream\n  csvParser.write(data);\n\n  // Return the CSV as a 2D array\n  return csvArr;\n};\n\n/**\n * Parses a 2D array of CSV data and returns a dataset in our expected form.\n * Sample:\n * {\n *   \"US\": {\n *     \"New York\": {\n *       \"latitude\" : \"42.1657\",\n *       \"longitude\" : \"-74.9481\",\n *       \"dateData\" : [\n *         {\n *           \"date\" : Date object (e.g. Wed Jan 22 2020 00:00:00 GMT-0500 (Eastern Standard Time))\n *           \"cases\" : \"0\"\n *         },\n *         {\n *           \"date\" : Date object (e.g. Wed Jan 23 2020 00:00:00 GMT-0500 (Eastern Standard Time))\n *           \"cases\" : \"0\"\n *         },\n *         ...\n *       ]\n *     }\n *     \"California\": {\n *       \"latitude\" : \"36.1162\",\n *       \"longitude\" : \"-119.6816\",\n *       \"dateData\" : [\n *         {\n *           \"date\" : Date object (e.g. Wed Jan 22 2020 00:00:00 GMT-0500 (Eastern Standard Time))\n *           \"cases\" : \"0\"\n *         },\n *         {\n *           \"date\" : Date object (e.g. Wed Jan 23 2020 00:00:00 GMT-0500 (Eastern Standard Time))\n *           \"cases\" : \"0\"\n *         },\n *         ...\n *       ]\n *     }\n *   }\n * }\n * @param {string} csvArr - A 2D array of CSV data.\n * @returns {Object} A structured nested dataset.\n */\nconst csvToNestedDataset = (csvArr) => {\n  const dataset = {};\n\n  let headerRow = null;\n\n  csvArr.forEach((row, i) => {\n    if(i === 0) {\n      headerRow = row; // store header row\n      return;\n    }\n\n    const countryRegion = row[COUNTRY_REGION_COLUMN];\n    let provinceState = row[PROVINCE_STATE_COLUMN];\n\n    if(!countryRegion) return; // right now, we want to skip anything with a missing country/region\n    dataset[countryRegion] = dataset[countryRegion] || {};\n\n    const countryRegionData = dataset[countryRegion];\n\n    // When we encounter a countryRegion without a value for proviceState, use countryRegion as the\n    // provinceState value\n    if(!provinceState) { provinceState = countryRegion };\n\n    countryRegionData[provinceState] = countryRegionData[provinceState] || {\n      latitude: row[LATITUDE_COLUMN],\n      longitude: row[LONGITUDE_COLUMN],\n      dateData: []\n    };\n\n    const provinceStateDateData = countryRegionData[provinceState].dateData;\n\n    row.forEach((cellValue, j) => {\n      if(j < FIRST_DATE_COLUMN) return;\n\n      const date = headerRow[j];\n      provinceStateDateData.push({\n        date: new Date(date),\n        cases: parseInt(cellValue)\n      });\n    });\n  });\n\n  return dataset;\n};\n\n\n/**\n * Callback for retrieving dataset data.\n *\n * @callback datasetsCallback\n * @param {string[][]} confirmedDataset - Dataset describing confirmed cases of COVID-19.\n * @param {string[][]} deathsDataset - Dataset describing deaths from COVID-19.\n * @param {string[][]} recoveredDataset - Dataset describing recoveries from COVID-19.\n * @param {Object<string,string[]>} countryRegionsToProvinceStatesMap - Map of countryRegions to arrays of provinceStates.\n */\n\n/**\n * Retrieves the primary datasets for the my-corona app.\n *\n * @param {datasetsCallback} callback - A callback to run.\n */\nconst getDatasets = (callback) => {\n  const noCacheAxios = axios.create({\n    headers: {'Cache-Control': 'no-cache'}\n  });\n\n  axios.all([\n    noCacheAxios.get('./data/time_series_19-covid-Confirmed.csv'),\n    noCacheAxios.get('./data/time_series_19-covid-Deaths.csv'),\n    noCacheAxios.get('./data/time_series_19-covid-Recovered.csv')\n  ]).then(axios.spread((confirmedResponse, deathsResponse, recoveredResponse) => {\n    const confirmedDataset = csvToNestedDataset(parseCsvData(confirmedResponse.data));\n    const deathsDataset = csvToNestedDataset(parseCsvData(deathsResponse.data));\n    const recoveredDataset = csvToNestedDataset(parseCsvData(recoveredResponse.data));\n\n    // provinceState to countryRegion mapping is derived from confirmed dataset, since it's the\n    // superset of locations in deaths and recovered datasets.\n    const countryRegionsToProvinceStatesMap = {};\n    Object.entries(confirmedDataset).forEach((entry) => {\n      countryRegionsToProvinceStatesMap[entry[0]] = Object.keys(entry[1]);\n    });\n\n    callback(\n      confirmedDataset,\n      deathsDataset,\n      recoveredDataset,\n      countryRegionsToProvinceStatesMap\n    );\n  })).catch(function (error) {\n    console.log(error);\n  });\n};\n\nexport default getDatasets;\n","import React from 'react';\nimport moment from 'moment';\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';\nimport _ from 'lodash';\n\nconst BasicLineChart = ({chartData, chartTitle}) => {\n\n  const datesToChartData = {};\n\n  Object.entries(chartData).forEach(([key, val]) => {\n    const label = key;\n    const data = val.data;\n\n    data.forEach((dataPoint) => {\n      const dateString = moment(dataPoint.date.toISOString()).format('YYYY-MM-DD');\n      datesToChartData[dateString] = datesToChartData[dateString] || {\n        name: dateString\n      };\n      const dataForDate = datesToChartData[dateString];\n      dataForDate[label] = dataPoint.cases;\n    });\n  });\n\n  const data = _.sortBy(Object.values(datesToChartData), ['name']);\n  return (\n    <>\n    <h1 style={{fontSize: '2em', marginBottom: '.5em'}}>{chartTitle}</h1>\n    <ResponsiveContainer height={400}>\n      <LineChart\n          data={data}\n          margin={{\n            top: 5, right: 30, left: 20, bottom: 5,\n          }}\n        >\n          <CartesianGrid strokeDasharray=\"3 3\" />\n          <XAxis dataKey=\"name\" />\n          <YAxis />\n          <Tooltip />\n          <Legend />\n          { Object.entries(chartData).map(([key, value]) => (\n            <Line type=\"monotone\" dataKey={key} stroke={value.color} key={key} />\n          )) }\n        </LineChart>\n      </ResponsiveContainer>\n    </>\n  );\n};\n\n  export default BasicLineChart;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Select, SelectItem } from 'carbon-components-react'\n\nfunction LocationSelector({\n  selectedProvinceState,\n  selectedCountryRegion,\n  countryRegionsToProvinceStates,\n  onCountryRegionChange,\n  onProvinceStateChange\n}) {\n\n  const countryRegionOptions = Object.keys(countryRegionsToProvinceStates).sort();\n  const proviceStateOptions = selectedCountryRegion == null\n    ? []\n    : countryRegionsToProvinceStates[selectedCountryRegion].sort();\n\n  return (\n    <div style={{marginBottom: '1em'}}>\n        <Select\n          id=\"region-select\"\n          labelText=\"Select a region\"\n          onChange={onCountryRegionChange}\n          value={selectedCountryRegion || ''}\n        >\n          <SelectItem text=\"- All Regions -\" value=\"\" />\n          {\n            countryRegionOptions.map((countryRegion) => (\n              <SelectItem key={countryRegion} text={countryRegion} value={countryRegion} />\n            ))\n          }\n        </Select>\n\n        <div style={{height: '1em'}}></div>\n\n        <Select\n          id=\"sub-region-select\"\n          labelText=\"Select a sub-region\"\n          onChange={onProvinceStateChange}\n          value={selectedProvinceState || ''}\n        >\n          <SelectItem text=\"- All Sub-regions -\" value=\"\" />\n          {\n            proviceStateOptions.length > 1 && proviceStateOptions.map((provinceState) => (\n              <SelectItem key={provinceState} text={provinceState} value={provinceState} />\n            ))\n          }\n        </Select>\n    </div>\n  );\n}\n\nexport default LocationSelector;\n\nLocationSelector.defaultProps = {\n  selectedProvinceState: null,\n  selectedCountryRegion: null,\n};\n\nLocationSelector.propTypes = {\n  onCountryRegionChange: PropTypes.func,\n  onProvinceStateChange: PropTypes.func,\n  selectedProvinceState: PropTypes.string,\n  selectedCountryRegion: PropTypes.string,\n  countryRegionsToProvinceStates: PropTypes.objectOf(PropTypes.any).isRequired,\n};\n","import React, { useEffect, useState } from 'react';\nimport alasql from 'alasql';\n\nimport './App.css';\nimport getDatasets from './modules/getDatasets';\nimport BasicLineChart from './components/charts/line/BasicLineChart';\nimport LocationSelector from './components/LocationSelector';\n\nfunction App() {\n  const dataTableNames = ['confirmed', 'deaths', 'recovered'];\n\n  const [countryRegion, setCountryRegion] = useState(null);\n  const [provinceState, setProvinceState] = useState(null);\n  const [countryRegionsToProvinceStates, setCountryRegionsToProvinceStates] = useState({});\n  const [sqlTablesLoaded, setSqlTablesLoaded] = useState(false);\n\n  // Load datasets\n  useEffect(() => {\n    getDatasets((confirmedDataset, deathsDataset, recoveredDataset, countryRegionsToProvinceStatesMap) => {\n      const datasetToTableData = (dataset) => {\n        const tableData = [];\n        Object.entries(dataset).forEach((countryRegionDataEntry) => {\n          const countryRegion = countryRegionDataEntry[0];\n          const provinceStateData = countryRegionDataEntry[1];\n          Object.entries(provinceStateData).forEach((provinceStateDataEntry) => {\n            const provinceState = provinceStateDataEntry[0];\n            const provinceStateData = provinceStateDataEntry[1];\n            provinceStateData.dateData.forEach((dateDataItem) => {\n              tableData.push({ countryRegion, provinceState: provinceState, date: new Date(dateDataItem.date), cases: dateDataItem.cases });\n            });\n          });\n        });\n        return tableData;\n      };\n\n      const columnStatement = '(provinceState STRING, countryRegion STRING, date DATE, cases INT)'; // using 'cases' here instead of 'count' to avoid SQL conflicts\n      dataTableNames.forEach((tableName) => {\n        alasql(`CREATE TABLE ${tableName} ${columnStatement}`);\n      });\n\n      alasql.tables.confirmed.data = datasetToTableData(confirmedDataset);\n      alasql.tables.deaths.data = datasetToTableData(deathsDataset);\n      alasql.tables.recovered.data = datasetToTableData(recoveredDataset);\n\n      setCountryRegionsToProvinceStates(countryRegionsToProvinceStatesMap);\n      setSqlTablesLoaded(true);\n    });\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  if(!sqlTablesLoaded) {\n    return 'Loading...';\n  }\n\n  const queryDateCounts = () => {\n    const [confirmedQueryResult, deathsQueryResult, recoveredQueryResult] = dataTableNames.map((tableName) => {\n      let query = `SELECT date, sum(cases) as cases FROM ${tableName}`;\n      let args = [];\n      if(countryRegion) {\n        query += ' WHERE countryRegion = ?'\n        args.push(countryRegion);\n\n        if(provinceState) {\n          query += ' AND provinceState = ?'\n          args.push(provinceState);\n        }\n      }\n      query += ' GROUP BY date ORDER BY date ASC';\n      return alasql(query, args);\n    });\n\n    return {\n      confirmedQueryResult,\n      deathsQueryResult,\n      recoveredQueryResult\n    }\n  };\n\n  const {confirmedQueryResult, deathsQueryResult, recoveredQueryResult} = queryDateCounts();\n  const chartData = {\n    Confirmed: {\n      data: confirmedQueryResult,\n      color: '#6F44C5'\n    },\n    Deaths: {\n      data: deathsQueryResult,\n      color: '#266060'\n    },\n    Recovered: {\n      data: recoveredQueryResult,\n      color: '#539CE3'\n    }\n  }\n  let chartTitle = 'COVID-19 Cases: ';\n  if(provinceState || countryRegion) {\n    chartTitle += (provinceState ? ` ${provinceState},` : '')\n      + (countryRegion ? ` ${countryRegion}` : '');\n  } else {\n    chartTitle += 'Global';\n  }\n\n\n  return (\n    <div className=\"App\">\n      <LocationSelector\n        selectedProvinceState={provinceState}\n        selectedCountryRegion={countryRegion}\n        countryRegionsToProvinceStates={countryRegionsToProvinceStates}\n        onCountryRegionChange={(e) => {\n          setCountryRegion(e.target.value === '' ? null : e.target.value);\n          setProvinceState(null); // reset provinceState selection whenever a new countryRegion is selected\n        }}\n        onProvinceStateChange={(e) => {\n          setProvinceState(e.target.value === '' ? null : e.target.value);\n        }}\n      />\n      <div className=\"LineChartContainer\">\n        {\n          <BasicLineChart chartTitle={chartTitle} chartData={chartData} />\n        }\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'carbon-components/css/carbon-components.min.css'\n\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}