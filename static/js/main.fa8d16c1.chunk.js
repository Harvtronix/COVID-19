(this["webpackJsonpmy-corona"]=this["webpackJsonpmy-corona"]||[]).push([[0],{39:function(e,t,n){e.exports=n(96)},44:function(e,t,n){},48:function(e,t,n){},85:function(e,t){},87:function(e,t){},96:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(37),r=n.n(o),u=(n(44),n(3)),i=n(2),s=n.n(i),l=(n(48),n(8)),d=n.n(l),f=n(38),v=n.n(f),E=function(e){var t=v()(),n=[];return t.on("readable",(function(){for(var e;e=t.read();)n.push(e)})),t.on("error",(function(e){console.error(e.message)})),t.write(e),n},g=function(e){var t={},n=null;return e.forEach((function(e,a){if(0!==a){var c=e[1],o=e[0];if(c){t[c]=t[c]||{};var r=t[c];o||(o=c),r[o]=r[o]||{latitude:e[2],longitude:e[3],dateData:[]};var u=r[o].dateData;e.forEach((function(e,t){if(!(t<4)){var a=n[t];u.push({date:new Date(a),cases:e})}}))}}else n=e})),t},b=function(e){d.a.all([d.a.get("./data/time_series_19-covid-Confirmed.csv"),d.a.get("./data/time_series_19-covid-Deaths.csv"),d.a.get("./data/time_series_19-covid-Recovered.csv")]).then(d.a.spread((function(t,n,a){var c=g(E(t.data)),o=g(E(n.data)),r=g(E(a.data)),u={};Object.entries(c).forEach((function(e){u[e[0]]=Object.keys(e[1])})),e(c,o,r,u)}))).catch((function(e){console.log(e)}))};function h(e){var t=e.selectedProvinceState,n=e.selectedCountryRegion,a=e.countryRegionsToProvinceStates,o=e.onCountryRegionChange,r=e.onProvinceStateChange,u=Object.keys(a).sort(),i=null==n?[]:a[n].sort();return c.a.createElement("div",null,c.a.createElement("select",{onChange:o,value:n||""},c.a.createElement("option",{key:"",value:"",disabled:!0},"Choose a country / region"),u.map((function(e){return c.a.createElement("option",{key:e,value:e},e)}))),c.a.createElement("select",{onChange:r,value:t||""},c.a.createElement("option",{key:"",value:"",disabled:!0},"Choose a province / state"),i.map((function(e){return c.a.createElement("option",{key:e,value:e},e)}))))}var m=h;h.defaultProps={selectedProvinceState:null,selectedCountryRegion:null};var p=function(){var e=Object(a.useState)(null),t=Object(u.a)(e,2),n=t[0],o=t[1],r=Object(a.useState)(null),i=Object(u.a)(r,2),l=i[0],d=i[1],f=Object(a.useState)({}),v=Object(u.a)(f,2),E=v[0],g=v[1],h=Object(a.useState)(!1),p=Object(u.a)(h,2),S=p[0],O=p[1],j=Object(a.useState)(null),R=Object(u.a)(j,2),y=R[0],T=R[1],C=Object(a.useState)(null),A=Object(u.a)(C,2),D=A[0],P=A[1],I=Object(a.useState)(null),L=Object(u.a)(I,2),k=L[0],B=L[1];return Object(a.useEffect)((function(){b((function(e,t,n,a){T(e),P(t),B(n),g(a)}))}),[]),Object(a.useEffect)((function(){if(y&&D&&k&&E){var e=function(e,t,n){var a=[];return Object.entries(e).forEach((function(e){var t=e[0],n=e[1];Object.entries(n).forEach((function(e){var n=e[0];e[1].dateData.forEach((function(e){a.push({countryRegion:t,provinceState:n,date:new Date(e.date),cases:e.cases})}))}))})),a};s()("DROP TABLE IF EXISTS confirmed"),s()("DROP TABLE IF EXISTS deaths"),s()("DROP TABLE IF EXISTS recovered");var t="(provinceState STRING, countryRegion STRING, date DATE, cases INT)";s()("CREATE TABLE confirmed ".concat(t)),s()("CREATE TABLE deaths ".concat(t)),s()("CREATE TABLE recovered ".concat(t)),s.a.tables.confirmed.data=e(y),s.a.tables.deaths.data=e(D),s.a.tables.recovered.data=e(k),O(!0)}}),[l,n,y,D,k,E]),y&&D&&k?c.a.createElement("div",{className:"App"},c.a.createElement(m,{selectedProvinceState:l,selectedCountryRegion:n,countryRegionsToProvinceStates:E,onCountryRegionChange:function(e){o(e.target.value),d(null)},onProvinceStateChange:function(e){d(e.target.value)}}),c.a.createElement("p",null,function(){if(S){var e="SELECT * FROM confirmed",t=[];n&&(e+=" WHERE countryRegion = ?",t.push(n),l&&(e+=" AND provinceState = ?",t.push(l)));var a=s()(e,t);return c.a.createElement(c.a.Fragment,null,S?"Found ".concat(a.length," data points."):"Loading data...")}}())):"Loading..."};r.a.render(c.a.createElement(p,null),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.fa8d16c1.chunk.js.map