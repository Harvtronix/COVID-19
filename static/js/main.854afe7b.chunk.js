(this["webpackJsonpmy-corona"]=this["webpackJsonpmy-corona"]||[]).push([[0],{107:function(e,t){},109:function(e,t){},119:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(51),c=a.n(r),l=(a(67),a(12)),i=a(11),s=a.n(i),u=(a(70),a(20)),d=a.n(u),v=a(52),f=a.n(v),m=function(e){var t=f()(),a=[];return t.on("readable",(function(){for(var e;e=t.read();)a.push(e)})),t.on("error",(function(e){console.error(e.message)})),t.write(e),a},g=function(e){var t={},a=null;return e.forEach((function(e,n){if(0!==n){var o=e[1],r=e[0];if(o){t[o]=t[o]||{};var c=t[o];r||(r=o),c[r]=c[r]||{latitude:e[2],longitude:e[3],dateData:[]};var l=c[r].dateData;e.forEach((function(e,t){if(!(t<4)){var n=a[t];l.push({date:new Date(n),cases:parseInt(e)})}}))}}else a=e})),t},h=function(e){var t=d.a.create({headers:{"Cache-Control":"no-cache"}});d.a.all([t.get("./data/time_series_19-covid-Confirmed.csv"),t.get("./data/time_series_19-covid-Deaths.csv"),t.get("./data/time_series_19-covid-Recovered.csv")]).then(d.a.spread((function(t,a,n){var o=g(m(t.data)),r=g(m(a.data)),c=g(m(n.data)),l={};Object.entries(o).forEach((function(e){l[e[0]]=Object.keys(e[1])})),e(o,r,c,l)}))).catch((function(e){console.log(e)}))},p=a(53),y=a(54),b=a(58),E=(a(118),function(e){var t=e.chartData,a=e.chartTitle,n={labels:["Qty","More","Sold","Restocking","Misc"],datasets:Object.keys(t).map((function(e){var a=t[e],n=!0,o=!1,r=void 0;try{for(var c,l=a[Symbol.iterator]();!(n=(c=l.next()).done);n=!0){var i=c.value;i.value=i.cases}}catch(s){o=!0,r=s}finally{try{n||null==l.return||l.return()}finally{if(o)throw r}}return{label:e,data:a}}))},r={title:a,axes:{left:{secondary:!0},bottom:{scaleType:"time",primary:!0}},curve:"curveMonotoneX",height:"5in",tooltip:{customHTML:function(e){return console.log(e),"date"in e&&"value"in e?'\n          <div>\n            <div class="datapoint-tooltip">\n              <a style="background-color:#000" class="tooltip-color"></a>\n              <p class="label"><strong>'.concat(e.datasetLabel,":</strong> ").concat(y(e.value).format("0,0"),'</p>\n            </div>\n            <div class="datapoint-tooltip">\n              <a style="background-color:#000" class="tooltip-color"></a>\n              <p class="label"><strong>Date:</strong> ').concat(p(e.date.toISOString()).format("YYYY-MM-DD"),"</p>\n            </div>\n          </div>\n          "):null}}};return o.a.createElement(b.a,{data:n,options:r})});function R(e){var t=e.selectedProvinceState,a=e.selectedCountryRegion,n=e.countryRegionsToProvinceStates,r=e.onCountryRegionChange,c=e.onProvinceStateChange,l=Object.keys(n).sort(),i=null==a?[]:n[a].sort();return o.a.createElement("div",{style:{marginBottom:"1em"}},o.a.createElement("select",{onChange:r,value:a||""},o.a.createElement("option",{key:"",value:""},"- All Regions -"),l.map((function(e){return o.a.createElement("option",{key:e,value:e},e)}))),o.a.createElement("select",{onChange:c,value:t||""},o.a.createElement("option",{key:"",value:""},"- All Subregions -"),i.length>1&&i.map((function(e){return o.a.createElement("option",{key:e,value:e},e)}))))}var S=R;R.defaultProps={selectedProvinceState:null,selectedCountryRegion:null};var C=function(){var e=["confirmed","deaths","recovered"],t=Object(n.useState)(null),a=Object(l.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(null),u=Object(l.a)(i,2),d=u[0],v=u[1],f=Object(n.useState)({}),m=Object(l.a)(f,2),g=m[0],p=m[1],y=Object(n.useState)(!1),b=Object(l.a)(y,2),R=b[0],C=b[1];if(Object(n.useEffect)((function(){h((function(t,a,n,o){var r=function(e){var t=[];return Object.entries(e).forEach((function(e){var a=e[0],n=e[1];Object.entries(n).forEach((function(e){var n=e[0];e[1].dateData.forEach((function(e){t.push({countryRegion:a,provinceState:n,date:new Date(e.date),cases:e.cases})}))}))})),t};e.forEach((function(e){s()("CREATE TABLE ".concat(e," ").concat("(provinceState STRING, countryRegion STRING, date DATE, cases INT)"))})),s.a.tables.confirmed.data=r(t),s.a.tables.deaths.data=r(a),s.a.tables.recovered.data=r(n),p(o),C(!0)}))}),[]),!R)return"Loading...";var O=function(){var t=e.map((function(e){var t="SELECT date, sum(cases) as cases FROM ".concat(e),a=[];return r&&(t+=" WHERE countryRegion = ?",a.push(r),d&&(t+=" AND provinceState = ?",a.push(d))),t+=" GROUP BY date ORDER BY date ASC",s()(t,a)})),a=Object(l.a)(t,3);return{confirmedQueryResult:a[0],deathsQueryResult:a[1],recoveredQueryResult:a[2]}}(),j={Confirmed:O.confirmedQueryResult,Deaths:O.deathsQueryResult,Recovered:O.recoveredQueryResult},D="COVID-19 Cases"+(d||r?":":"")+(d?" ".concat(d,","):"")+(r?" ".concat(r):"");return o.a.createElement("div",{className:"App"},o.a.createElement(S,{selectedProvinceState:d,selectedCountryRegion:r,countryRegionsToProvinceStates:g,onCountryRegionChange:function(e){c(""===e.target.value?null:e.target.value),v(null)},onProvinceStateChange:function(e){v(""===e.target.value?null:e.target.value)}}),o.a.createElement("div",{className:"LineChartContainer"},o.a.createElement(E,{chartTitle:D,chartData:j})))};c.a.render(o.a.createElement(C,null),document.getElementById("root"))},62:function(e,t,a){e.exports=a(119)},67:function(e,t,a){},70:function(e,t,a){}},[[62,1,2]]]);
//# sourceMappingURL=main.854afe7b.chunk.js.map