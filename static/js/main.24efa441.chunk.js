(this["webpackJsonpmy-corona"]=this["webpackJsonpmy-corona"]||[]).push([[0],{203:function(e,t,a){e.exports=a(438)},209:function(e,t,a){},212:function(e,t,a){},249:function(e,t){},251:function(e,t){},438:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(58),o=a.n(c),l=(a(208),a(209),a(14)),u=a(35),i=a.n(u),s=(a(212),a(62)),d=a.n(s),v=a(164),f=a.n(v),m=function(e){var t=f()(),a=[];return t.on("readable",(function(){for(var e;e=t.read();)a.push(e)})),t.on("error",(function(e){console.error(e.message)})),t.write(e),a},h=function(e){var t={},a=null;return e.forEach((function(e,n){if(0!==n){var r=e[1],c=e[0];if(r){t[r]=t[r]||{};var o=t[r];c||(c=r),o[c]=o[c]||{latitude:e[2],longitude:e[3],dateData:[]};var l=o[c].dateData;e.forEach((function(e,t){if(!(t<4)){var n=a[t];l.push({date:new Date(n),cases:parseInt(e)})}}))}}else a=e})),t},g=function(e){var t=d.a.create({headers:{"Cache-Control":"no-cache"}});d.a.all([t.get("./data/time_series_19-covid-Confirmed.csv"),t.get("./data/time_series_19-covid-Deaths.csv"),t.get("./data/time_series_19-covid-Recovered.csv")]).then(d.a.spread((function(t,a,n){var r=h(m(t.data)),c=h(m(a.data)),o=h(m(n.data)),l={};Object.entries(r).forEach((function(e){l[e[0]]=Object.keys(e[1])})),e(r,c,o,l)}))).catch((function(e){console.log(e)}))},E=a(165),b=a.n(E),y=a(15),R=a(174),p=a.n(R),O=function(e){var t=e.chartData,a=e.chartTitle,n={};Object.entries(t).forEach((function(e){var t=Object(l.a)(e,2),a=t[0],r=t[1],c=a;r.data.forEach((function(e){var t=b()(e.date.toISOString()).format("YYYY-MM-DD");n[t]=n[t]||{name:t},n[t][c]=e.cases}))}));var c=p.a.sortBy(Object.values(n),["name"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{style:{fontSize:"2em",marginBottom:".5em"}},a),r.a.createElement(y.e,{height:400},r.a.createElement(y.d,{data:c,margin:{top:5,right:30,left:20,bottom:5}},r.a.createElement(y.a,{strokeDasharray:"3 3"}),r.a.createElement(y.g,{dataKey:"name"}),r.a.createElement(y.h,null),r.a.createElement(y.f,null),r.a.createElement(y.b,null),Object.entries(t).map((function(e){var t=Object(l.a)(e,2),a=t[0],n=t[1];return r.a.createElement(y.c,{type:"monotone",dataKey:a,stroke:n.color,key:a})})))))},C=a(442),S=a(441);function j(e){var t=e.selectedProvinceState,a=e.selectedCountryRegion,n=e.countryRegionsToProvinceStates,c=e.onCountryRegionChange,o=e.onProvinceStateChange,l=Object.keys(n).sort(),u=null==a?[]:n[a].sort();return r.a.createElement("div",{style:{marginBottom:"1em"}},r.a.createElement(C.a,{id:"region-select",labelText:"Select a region",onChange:c,value:a||""},r.a.createElement(S.a,{text:"- All Regions -",value:""}),l.map((function(e){return r.a.createElement(S.a,{key:e,text:e,value:e})}))),r.a.createElement("div",{style:{height:"1em"}}),r.a.createElement(C.a,{id:"sub-region-select",labelText:"Select a sub-region",onChange:o,value:t||""},r.a.createElement(S.a,{text:"- All Sub-regions -",value:""}),u.length>1&&u.map((function(e){return r.a.createElement(S.a,{key:e,text:e,value:e})}))))}var D=j;j.defaultProps={selectedProvinceState:null,selectedCountryRegion:null};var T=function(){var e=["confirmed","deaths","recovered"],t=Object(n.useState)(null),a=Object(l.a)(t,2),c=a[0],o=a[1],u=Object(n.useState)(null),s=Object(l.a)(u,2),d=s[0],v=s[1],f=Object(n.useState)({}),m=Object(l.a)(f,2),h=m[0],E=m[1],b=Object(n.useState)(!1),y=Object(l.a)(b,2),R=y[0],p=y[1];if(Object(n.useEffect)((function(){g((function(t,a,n,r){var c=function(e){var t=[];return Object.entries(e).forEach((function(e){var a=e[0],n=e[1];Object.entries(n).forEach((function(e){var n=e[0];e[1].dateData.forEach((function(e){t.push({countryRegion:a,provinceState:n,date:new Date(e.date),cases:e.cases})}))}))})),t};e.forEach((function(e){i()("CREATE TABLE ".concat(e," ").concat("(provinceState STRING, countryRegion STRING, date DATE, cases INT)"))})),i.a.tables.confirmed.data=c(t),i.a.tables.deaths.data=c(a),i.a.tables.recovered.data=c(n),E(r),p(!0)}))}),[]),!R)return"Loading...";var C=function(){var t=e.map((function(e){var t="SELECT date, sum(cases) as cases FROM ".concat(e),a=[];return c&&(t+=" WHERE countryRegion = ?",a.push(c),d&&(t+=" AND provinceState = ?",a.push(d))),t+=" GROUP BY date ORDER BY date ASC",i()(t,a)})),a=Object(l.a)(t,3);return{confirmedQueryResult:a[0],deathsQueryResult:a[1],recoveredQueryResult:a[2]}}(),S={Confirmed:{data:C.confirmedQueryResult,color:"#6F44C5"},Deaths:{data:C.deathsQueryResult,color:"#266060"},Recovered:{data:C.recoveredQueryResult,color:"#539CE3"}},j="COVID-19 Cases: ";return j+=d||c?(d?" ".concat(d,","):"")+(c?" ".concat(c):""):"Global",r.a.createElement("div",{className:"App"},r.a.createElement(D,{selectedProvinceState:d,selectedCountryRegion:c,countryRegionsToProvinceStates:h,onCountryRegionChange:function(e){o(""===e.target.value?null:e.target.value),v(null)},onProvinceStateChange:function(e){v(""===e.target.value?null:e.target.value)}}),r.a.createElement("div",{className:"LineChartContainer"},r.a.createElement(O,{chartTitle:j,chartData:S})))};o.a.render(r.a.createElement(T,null),document.getElementById("root"))}},[[203,1,2]]]);
//# sourceMappingURL=main.24efa441.chunk.js.map