(this["webpackJsonpmy-corona"]=this["webpackJsonpmy-corona"]||[]).push([[0],{39:function(e,t,n){e.exports=n(96)},44:function(e,t,n){},48:function(e,t,n){},85:function(e,t){},87:function(e,t){},96:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(37),r=n.n(o),u=(n(44),n(2)),i=n(5),s=n.n(i),l=(n(48),n(8)),f=n.n(l),d=n(38),v=n.n(d),E=function(e){var t=v()(),n=[];return t.on("readable",(function(){for(var e;e=t.read();)n.push(e)})),t.on("error",(function(e){console.error(e.message)})),t.write(e),n},h=function(e){var t={},n=null;return e.forEach((function(e,a){if(0!==a){var c=e[1],o=e[0];if(c){t[c]=t[c]||{};var r=t[c];o||(o=c),r[o]=r[o]||{latitude:e[2],longitude:e[3],dateData:[]};var u=r[o].dateData;e.forEach((function(e,t){if(!(t<4)){var a=n[t];u.push({date:new Date(a),cases:parseInt(e)})}}))}}else n=e})),t},g=function(e){f.a.all([f.a.get("./data/time_series_19-covid-Confirmed.csv"),f.a.get("./data/time_series_19-covid-Deaths.csv"),f.a.get("./data/time_series_19-covid-Recovered.csv")]).then(f.a.spread((function(t,n,a){var c=h(E(t.data)),o=h(E(n.data)),r=h(E(a.data)),u={};Object.entries(c).forEach((function(e){u[e[0]]=Object.keys(e[1])})),e(c,o,r,u)}))).catch((function(e){console.log(e)}))};function m(e){var t=e.selectedProvinceState,n=e.selectedCountryRegion,a=e.countryRegionsToProvinceStates,o=e.onCountryRegionChange,r=e.onProvinceStateChange,u=Object.keys(a).sort(),i=null==n?[]:a[n].sort();return c.a.createElement("div",null,c.a.createElement("select",{onChange:o,value:n||""},c.a.createElement("option",{key:"",value:"",disabled:!0},"Choose a country / region"),u.map((function(e){return c.a.createElement("option",{key:e,value:e},e)}))),c.a.createElement("select",{onChange:r,value:t||""},c.a.createElement("option",{key:"",value:"",disabled:!0},"Choose a province / state"),i.map((function(e){return c.a.createElement("option",{key:e,value:e},e)}))))}var b=m;m.defaultProps={selectedProvinceState:null,selectedCountryRegion:null};var O=function(){var e=["confirmed","deaths","recovered"],t=Object(a.useState)(null),n=Object(u.a)(t,2),o=n[0],r=n[1],i=Object(a.useState)(null),l=Object(u.a)(i,2),f=l[0],d=l[1],v=Object(a.useState)({}),E=Object(u.a)(v,2),h=E[0],m=E[1],O=Object(a.useState)(!1),p=Object(u.a)(O,2),S=p[0],y=p[1],j=Object(a.useState)(null),R=Object(u.a)(j,2),C=R[0],D=R[1],T=Object(a.useState)(null),P=Object(u.a)(T,2),k=P[0],N=P[1],A=Object(a.useState)(null),I=Object(u.a)(A,2),_=I[0],w=I[1];return Object(a.useEffect)((function(){g((function(e,t,n,a){D(e),N(t),w(n),m(a)}))}),[]),Object(a.useEffect)((function(){if(C&&k&&_&&h){var t=function(e,t,n){var a=[];return Object.entries(e).forEach((function(e){var t=e[0],n=e[1];Object.entries(n).forEach((function(e){var n=e[0];e[1].dateData.forEach((function(e){a.push({countryRegion:t,provinceState:n,date:new Date(e.date),cases:e.cases})}))}))})),a};e.forEach((function(e){s()("DROP TABLE IF EXISTS ".concat(e))}));e.forEach((function(e){s()("CREATE TABLE ".concat(e," ").concat("(provinceState STRING, countryRegion STRING, date DATE, cases INT)"))})),s.a.tables.confirmed.data=t(C),s.a.tables.deaths.data=t(k),s.a.tables.recovered.data=t(_),y(!0)}}),[f,o,C,k,_,h,e]),C&&k&&_?c.a.createElement("div",{className:"App"},c.a.createElement(b,{selectedProvinceState:f,selectedCountryRegion:o,countryRegionsToProvinceStates:h,onCountryRegionChange:function(e){r(e.target.value),d(null)},onProvinceStateChange:function(e){d(e.target.value)}}),function(){if(!S)return"Loading data...";var t=e.map((function(e){var t="SELECT date, sum(cases) as cases FROM ".concat(e),n=[];return o&&(t+=" WHERE countryRegion = ?",n.push(o),f&&(t+=" AND provinceState = ?",n.push(f))),t+=" GROUP BY date ORDER BY date ASC",s()(t,n)})),n=Object(u.a)(t,3),a=n[0],r=n[1],i=n[2];return c.a.createElement(c.a.Fragment,null,c.a.createElement("h1",null,"Confirmed"),JSON.stringify(a),c.a.createElement("h1",null,"Deaths"),JSON.stringify(r),c.a.createElement("h1",null,"Recovered"),JSON.stringify(i))}()):"Loading..."};r.a.render(c.a.createElement(O,null),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.235c1bf4.chunk.js.map