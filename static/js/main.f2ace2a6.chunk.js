(this["webpackJsonpmy-corona"]=this["webpackJsonpmy-corona"]||[]).push([[0],{105:function(e,t){},107:function(e,t){},117:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(50),o=a.n(c),u=(a(64),a(7)),i=a(9),s=a.n(i),l=(a(68),a(20)),d=a.n(l),f=a(51),v=a.n(f),h=function(e){var t=v()(),a=[];return t.on("readable",(function(){for(var e;e=t.read();)a.push(e)})),t.on("error",(function(e){console.error(e.message)})),t.write(e),a},m=function(e){var t={},a=null;return e.forEach((function(e,n){if(0!==n){var r=e[1],c=e[0];if(r){t[r]=t[r]||{};var o=t[r];c||(c=r),o[c]=o[c]||{latitude:e[2],longitude:e[3],dateData:[]};var u=o[c].dateData;e.forEach((function(e,t){if(!(t<4)){var n=a[t];u.push({date:new Date(n),cases:parseInt(e)})}}))}}else a=e})),t},b=function(e){var t=d.a.create({headers:{"Cache-Control":"no-cache"}});d.a.all([t.get("./data/time_series_19-covid-Confirmed.csv"),t.get("./data/time_series_19-covid-Deaths.csv"),t.get("./data/time_series_19-covid-Recovered.csv")]).then(d.a.spread((function(t,a,n){var r=m(h(t.data)),c=m(h(a.data)),o=m(h(n.data)),u={};Object.entries(r).forEach((function(e){u[e[0]]=Object.keys(e[1])})),e(r,c,o,u)}))).catch((function(e){console.log(e)}))},y=a(55),E=(a(116),function(e){var t=e.queryResult,a={labels:["Qty","More","Sold","Restocking","Misc"],datasets:Object.keys(t).map((function(e){var a=t[e],n=!0,r=!1,c=void 0;try{for(var o,u=a[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var i=o.value;i.value=i.cases}}catch(s){r=!0,c=s}finally{try{n||null==u.return||u.return()}finally{if(r)throw c}}return{label:e,data:a}}))};return r.a.createElement(y.a,{data:a,options:{title:"Line (time series)",axes:{left:{secondary:!0},bottom:{scaleType:"time",primary:!0}},curve:"curveMonotoneX",height:"400px"}})});function p(e){var t=e.selectedProvinceState,a=e.selectedCountryRegion,n=e.countryRegionsToProvinceStates,c=e.onCountryRegionChange,o=e.onProvinceStateChange,u=Object.keys(n).sort(),i=null==a?[]:n[a].sort();return r.a.createElement("div",null,r.a.createElement("select",{onChange:c,value:a||""},r.a.createElement("option",{key:"",value:"",disabled:!0},"Choose a country / region"),u.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement("select",{onChange:o,value:t||""},r.a.createElement("option",{key:"",value:"",disabled:!0},"Choose a province / state"),i.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))))}var g=p;p.defaultProps={selectedProvinceState:null,selectedCountryRegion:null};var O=function(){var e=["confirmed","deaths","recovered"],t=Object(n.useState)(null),a=Object(u.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(null),l=Object(u.a)(i,2),d=l[0],f=l[1],v=Object(n.useState)({}),h=Object(u.a)(v,2),m=h[0],y=h[1],p=Object(n.useState)(!1),O=Object(u.a)(p,2),R=O[0],S=O[1],j=Object(n.useState)(null),C=Object(u.a)(j,2),T=C[0],k=C[1],D=Object(n.useState)(null),P=Object(u.a)(D,2),A=P[0],I=P[1],w=Object(n.useState)(null),L=Object(u.a)(w,2),N=L[0],_=L[1];if(Object(n.useEffect)((function(){b((function(e,t,a,n){k(e),I(t),_(a),y(n)}))}),[]),Object(n.useEffect)((function(){if(T&&A&&N&&m){var t=function(e,t,a){var n=[];return Object.entries(e).forEach((function(e){var t=e[0],a=e[1];Object.entries(a).forEach((function(e){var a=e[0];e[1].dateData.forEach((function(e){n.push({countryRegion:t,provinceState:a,date:new Date(e.date),cases:e.cases})}))}))})),n};e.forEach((function(e){s()("DROP TABLE IF EXISTS ".concat(e))}));e.forEach((function(e){s()("CREATE TABLE ".concat(e," ").concat("(provinceState STRING, countryRegion STRING, date DATE, cases INT)"))})),s.a.tables.confirmed.data=t(T),s.a.tables.deaths.data=t(A),s.a.tables.recovered.data=t(N),S(!0)}}),[d,c,T,A,N,m,e]),!T||!A||!N)return"Loading...";var B=function(){if(!R)return null;var t=e.map((function(e){var t="SELECT date, sum(cases) as cases FROM ".concat(e),a=[];return c&&(t+=" WHERE countryRegion = ?",a.push(c),d&&(t+=" AND provinceState = ?",a.push(d))),t+=" GROUP BY date ORDER BY date ASC",s()(t,a)})),a=Object(u.a)(t,3);return{confirmedQueryResult:a[0],deathsQueryResult:a[1],recoveredQueryResult:a[2]}};return r.a.createElement("div",{className:"App"},r.a.createElement(g,{selectedProvinceState:d,selectedCountryRegion:c,countryRegionsToProvinceStates:m,onCountryRegionChange:function(e){o(e.target.value),f(null)},onProvinceStateChange:function(e){f(e.target.value)}}),r.a.createElement("div",{className:"LineChartContainer"},R&&r.a.createElement(E,{queryResult:B()})))};o.a.render(r.a.createElement(O,null),document.getElementById("root"))},59:function(e,t,a){e.exports=a(117)},64:function(e,t,a){},68:function(e,t,a){}},[[59,1,2]]]);
//# sourceMappingURL=main.f2ace2a6.chunk.js.map